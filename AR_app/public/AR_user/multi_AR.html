<!DOCTYPE html>
<html lang="ja">
  <head>
    <link rel="stylesheet" href="static/user.css">
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebAR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://ar-js-org.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin: 0px; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false;" loading-screen="enabled: false;" renderer="logarithmicDepthBuffer: true;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: true; markerWidth: 0.2;" id="scene" embedded gesture-detector>

      <a-assets>
        <a-asset-item id="animated-asset" src="../Content/.glb/hiyoko5-1737683749786.glb"></a-asset-item>
        <audio id="audio" src="tanktop.mp3" preload="auto"></audio>
        <a-asset-item id="animated-asset2" src="../Content/.glb/free_ac_unit-1737683705900.glb"></a-asset-item>
        <audio id="audio2" src="tanktop.mp3" preload="auto"></audio>
      </a-assets>

      <!-- マーカー1 -->
      <a-marker id="animated-marker" type="pattern" preset="custom" url="../Content/.patt/pattern-onigiri-01-dot-1737686219005.patt"
        raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
        <a-entity id="model" scale="1 1 1" animation-mixer="loop: repeat" gltf-model="#animated-asset" class="clickable"
          animation="property: rotation; to: 0 360 0; dur: 3600; easing: linear; loop: true" gesture-handler visible="false">
        </a-entity>
      </a-marker>

      <!-- マーカー2 -->
      <a-marker id="animated-marker2" type="pattern" preset="custom" url="../Content/.patt/pattern-marker-1737683711197.patt"
        raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
        <a-entity id="model2" scale="1 1 1" animation-mixer="loop: repeat" gltf-model="#animated-asset2" class="clickable"
          animation="property: rotation; to: 0 360 0; dur: 3600; easing: linear; loop: true" gesture-handler visible="false">
        </a-entity>
      </a-marker>

      <!-- カメラ設定 -->
      <a-entity camera position="0 1.6 5" ></a-entity>  <!-- カメラ位置と視野角を設定 -->

    </a-scene>

    <div id="subtitle">ここに字幕が表示されます</div>

    <button id="toggle-volume" class="top-right-button" style="right: 200px;">音量ON</button>
    <button id="toggle-subtitle" class="top-right-button" style="right: 320px;">字幕OFF</button>
    <a href="home.html"><button class="top-right-button">戻る</button></a>

    <canvas id="qr-canvas" style="display:none;"></canvas>

    <script>
      // モデルをクリックした際に音を鳴らすインタラクションの追加
      document.querySelector('#model').addEventListener('click', function () {
        var audio = document.querySelector('#audio');
        audio.play();
        console.log("モデル1がクリックされました");
      });

      document.querySelector('#model2').addEventListener('click', function () {
        var audio2 = document.querySelector('#audio2');
        audio2.play();
        console.log("モデル2がクリックされました");
      });
    </script>
  </body>
</html>
